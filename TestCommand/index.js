(function(l,w){"use strict";function y(e){const{metro:{findByProps:n,findByStoreName:i,common:{lodash:{merge:r}}}}=e,a=n("_sendMessage"),{createBotMessage:o}=n("createBotMessage"),d=n("BOT_AVATARS"),{getChannelId:f}=i("SelectedChannelStore");return function(m,c){if(m.channelId??=f(),[null,void 0].includes(m.channelId))throw new Error("No channel id to receive the message into (channelId)");let s=m;if(m.really){typeof c=="object"&&(s=r(s,c));const t=[s,{}];t[0].tts??=!1;for(const p of["allowedMentions","messageReference"])p in t[0]&&(t[1][p]=t[0][p],delete t[0][p]);const h="overwriteSendMessageArg2";return h in t[0]&&(t[1]=t[0][h],delete t[0][h]),a._sendMessage(m.channelId,...t)}return c!==!0&&(s=o(s)),typeof c=="object"&&(s=r(s,c),typeof c.author=="object"&&function(){const t=c.author;typeof t.avatarURL=="string"&&(d.BOT_AVATARS[t.avatar??t.avatarURL]=t.avatarURL,t.avatar??=t.avatarURL,delete t.avatarURL)}()),a.receiveMessage(s.channel_id,s),s}}function g(e,n,i){if(!e?.name||!e?.description)throw new Error(`No name(${e?.name}) or description(${e?.description}) in the passed command (command name: ${e?.name})`);if(e.displayName??=n?.names?.[i]??e.name,e.displayDescription??=n?.names?.[i]??e.description,e.options){if(!Array.isArray(e.options))throw new Error(`Options is not an array (received: ${typeof e.options})`);for(var r=0;r<e.options.length;r++){const o=e.options[r];if(!o?.name||!o?.description)throw new Error(`No name(${o?.name}) or description(${o?.description} in the option with index ${r}`);if(o.displayName??=n?.options?.[r]?.names?.[i]??o.name,o.displayDescription??=n?.options?.[r]?.descriptions?.[i]??o.description,o?.choices){if(!Array.isArray(o?.choices))throw new Error(`Choices is not an array (received: ${typeof o.choices})`);for(var a=0;a<o.choices.length;a++){const d=o.choices[a];if(!d?.name)throw new Error(`No name of choice with index ${a} in option with index ${r}`);d.displayName??=n?.options?.[r]?.choices?.[a]?.names?.[i]??d.name}}}}return e}let u;function v(){return window.sendMessage?window.sendMessage?.(...arguments):(u||(u=y(vendetta)),u(...arguments))}function A(e){return new Proxy(e,{get(n,i){return console.log(`Accessed ${i}`),n[i]}})}var M={meta:vendetta.plugin,patches:[],onUnload(){this.patches.forEach(function(e){return e()}),this.patches=[]},onLoad(){var e=this;try{[g({execute:async function(n,i){if(i.autocomplete){const r=[{name:"meow",displayName:"meow",value:"mrrp"}];return console.log(i.autocomplete),new Promise(function(a,o){return a(new Promise(function(d,f){return d(new Promise(function(m,c){return m(A({choices:r}))}))}))})}v({content:n.find(function(r){return r.name==="text-area"}).value})},type:1,inputType:1,applicationId:"-1",name:"!test",description:"test",options:[{required:!0,autocomplete:!0,type:3,name:"text-area",description:"Token of the account to login into"}]})].forEach(function(n){return e.patches.push(w.registerCommand(n))})}catch(n){console.error(n),console.log(n.stack),alert(`There was an error while loading TestCommand
`+n.stack)}}};return l.default=M,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.commands);
